<div class="box-form">
    <h3 class="mb-3">{{productId ? 'Editar produto' : 'Cadastro de produto' }}</h3>
    <form class="form_clientes" [formGroup]="formProduct" (ngSubmit)="onSubmit()">

        <div class="form-group">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="icofont-barcode"></i></span>
                </div>
                <input autocomplete="off" type="text" class="form-control" formControlName="cod"
                    placeholder="Código do produto">
            </div>
        </div>

        <div class="form-group" [ngClass]="{ 'has-danger': isValidInput('name') && form.name.errors }">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="icofont-box"></i></span>
                </div>
                <input autocomplete="off" type="text" class="form-control" formControlName="name"
                    placeholder="Nome do produto"
                    [ngClass]="{ 'form-control-danger': isValidInput('name') && form.name.errors }">
            </div>
            <div *ngIf="isValidInput('name')" class="error-message">
                <div *ngIf="form.name.errors.required">O campo nome do produto é obrigatório</div>
            </div>
        </div>

        <div class="form-group" [ngClass]="{ 'has-danger': isValidInput('price') && form.price.errors }">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="icofont-dollar"></i></span>
                </div>
                <input autocomplete="off" type="text" class="form-control" formControlName="price"
                    placeholder="Preço unitário" mask="separator.2" [thousandSeparator]="'.'" [decimalMarker]="','"
                    [dropSpecialCharacters]="true" [prefix]="formProduct.value.price ? 'R$ ' : ''"
                    [ngClass]="{ 'form-control-danger': isValidInput('price') && form.price.errors }">
            </div>
            <div *ngIf="isValidInput('price')" class="error-message">
                <div *ngIf="form.price.errors.required">O campo preço é obrigatório</div>
            </div>
        </div>

        <div class="form-group">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="icofont-dice-multiple"></i></span>
                </div>
                <input autocomplete="off" type="number" class="form-control" formControlName="qtd"
                    placeholder="Quantidade">
            </div>
        </div>

        <div class="form-group">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="icofont-warning-alt"></i></span>
                </div>
                <input autocomplete="off" type="number" class="form-control" formControlName="qtdMin"
                    placeholder="Quantidade minima para exibir alerta">
            </div>
        </div>

        <button *ngIf="!submitted" type="submit" class="btn btn-round btn-primary mr-3"
            [disabled]="!formProduct.valid">Cadastrar</button>
        <button *ngIf="submitted" type="submit" class="btn btn-round btn-primary mr-3" disabled><i
                class="icofont-spinner-alt-6 rotaring"></i></button>
        <button type="button" class="btn btn-primary btn-outline-primary btn-round"
            [routerLink]="['/products']">Voltar</button>
    </form>
</div>
